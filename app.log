DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00104s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009175s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01185s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01296s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01388s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00045s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00066s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:aiogram.event:Update id=657782878 is handled. Duration 0 ms by bot id=7128547705
INFO:aiogram.event:Update id=657782879 is handled. Duration 297 ms by bot id=7128547705
INFO:aiogram.event:Update id=657782880 is handled. Duration 94 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 18.39s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782881 is handled. Duration 93 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00108s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782882 is handled. Duration 469 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00038s] (1,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782883 is handled. Duration 187 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 2.088s ago] (2,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782884 is not handled. Duration 0 ms by bot id=7128547705
ERROR:aiogram.event:Cause exception while process update id=657782884 by bot id=7128547705
IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".
[SQL: DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.ForeignKeyViolationError: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\САША!\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\fsm\storage\memory.py", line 56, in lock
    yield
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\courses\telegram\simple_bot\middlewares\db.py", line 21, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\courses\telegram\simple_bot\handlers\admin_private.py", line 75, in delete_subscribe
    await orm_delete_subscribe(session, int(subscribe_id))
  File "D:\courses\telegram\simple_bot\database\orm_query.py", line 164, in orm_delete_subscribe
    await session.execute(query)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 461, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1946, in orm_execute_statement
    return super().orm_execute_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".
[SQL: DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 27.69s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782885 is handled. Duration 171 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 9.298s ago] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782886 is handled. Duration 532 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 9.124s ago] (2,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782887 is not handled. Duration 0 ms by bot id=7128547705
ERROR:aiogram.event:Cause exception while process update id=657782887 by bot id=7128547705
IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".
[SQL: DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.ForeignKeyViolationError: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\САША!\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\fsm\storage\memory.py", line 56, in lock
    yield
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\courses\telegram\simple_bot\middlewares\db.py", line 21, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\courses\telegram\simple_bot\handlers\admin_private.py", line 75, in delete_subscribe
    await orm_delete_subscribe(session, int(subscribe_id))
  File "D:\courses\telegram\simple_bot\database\orm_query.py", line 164, in orm_delete_subscribe
    await session.execute(query)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 461, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1946, in orm_execute_statement
    return super().orm_execute_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".
[SQL: DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00085s] (2,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782888 is handled. Duration 172 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 21.22s ago] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782889 is handled. Duration 484 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 20.8s ago] (2,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782890 is not handled. Duration 0 ms by bot id=7128547705
ERROR:aiogram.event:Cause exception while process update id=657782890 by bot id=7128547705
IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".
[SQL: DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.ForeignKeyViolationError: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\САША!\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\fsm\storage\memory.py", line 56, in lock
    yield
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\courses\telegram\simple_bot\middlewares\db.py", line 21, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\courses\telegram\simple_bot\handlers\admin_private.py", line 75, in delete_subscribe
    await orm_delete_subscribe(session, int(subscribe_id))
  File "D:\courses\telegram\simple_bot\database\orm_query.py", line 164, in orm_delete_subscribe
    await session.execute(query)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 461, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1946, in orm_execute_statement
    return super().orm_execute_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".
[SQL: DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:aiogram.event:Update id=657782891 is handled. Duration 125 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 50.79s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782892 is handled. Duration 140 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 32.3s ago] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782893 is handled. Duration 297 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 31.8s ago] (2,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782894 is not handled. Duration 0 ms by bot id=7128547705
ERROR:aiogram.event:Cause exception while process update id=657782894 by bot id=7128547705
IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".
[SQL: DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.ForeignKeyViolationError: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\САША!\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\fsm\storage\memory.py", line 56, in lock
    yield
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\courses\telegram\simple_bot\middlewares\db.py", line 21, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\courses\telegram\simple_bot\handlers\admin_private.py", line 75, in delete_subscribe
    await orm_delete_subscribe(session, int(subscribe_id))
  File "D:\courses\telegram\simple_bot\database\orm_query.py", line 164, in orm_delete_subscribe
    await session.execute(query)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 461, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1946, in orm_execute_statement
    return super().orm_execute_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".
[SQL: DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 55.79s ago] (2,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782895 is not handled. Duration 0 ms by bot id=7128547705
ERROR:aiogram.event:Cause exception while process update id=657782895 by bot id=7128547705
IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".
[SQL: DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.ForeignKeyViolationError: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\САША!\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\fsm\storage\memory.py", line 56, in lock
    yield
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\courses\telegram\simple_bot\middlewares\db.py", line 21, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\courses\telegram\simple_bot\handlers\admin_private.py", line 75, in delete_subscribe
    await orm_delete_subscribe(session, int(subscribe_id))
  File "D:\courses\telegram\simple_bot\database\orm_query.py", line 164, in orm_delete_subscribe
    await session.execute(query)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 461, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1946, in orm_execute_statement
    return super().orm_execute_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".
[SQL: DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 70.4s ago] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782896 is handled. Duration 406 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 70.23s ago] (2,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782897 is not handled. Duration 0 ms by bot id=7128547705
ERROR:aiogram.event:Cause exception while process update id=657782897 by bot id=7128547705
IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".
[SQL: DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.ForeignKeyViolationError: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\САША!\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\fsm\storage\memory.py", line 56, in lock
    yield
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\courses\telegram\simple_bot\middlewares\db.py", line 21, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\courses\telegram\simple_bot\handlers\admin_private.py", line 75, in delete_subscribe
    await orm_delete_subscribe(session, int(subscribe_id))
  File "D:\courses\telegram\simple_bot\database\orm_query.py", line 164, in orm_delete_subscribe
    await session.execute(query)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 461, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1946, in orm_execute_statement
    return super().orm_execute_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".
[SQL: DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:aiogram.event:Update id=657782898 is handled. Duration 94 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 100.2s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782899 is handled. Duration 94 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 81.69s ago] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782900 is handled. Duration 265 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 81.32s ago] (2,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782901 is not handled. Duration 0 ms by bot id=7128547705
ERROR:aiogram.event:Cause exception while process update id=657782901 by bot id=7128547705
IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".
[SQL: DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.ForeignKeyViolationError: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\САША!\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\fsm\storage\memory.py", line 56, in lock
    yield
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\courses\telegram\simple_bot\middlewares\db.py", line 21, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\courses\telegram\simple_bot\handlers\admin_private.py", line 75, in delete_subscribe
    await orm_delete_subscribe(session, int(subscribe_id))
  File "D:\courses\telegram\simple_bot\database\orm_query.py", line 164, in orm_delete_subscribe
    await session.execute(query)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 461, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1946, in orm_execute_statement
    return super().orm_execute_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".
[SQL: DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:aiogram.event:Update id=657782902 is not handled. Duration 0 ms by bot id=7128547705
INFO:aiogram.dispatcher:Polling stopped
INFO:aiogram.dispatcher:Polling stopped for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00071s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.006376s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007421s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008384s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009272s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:
DROP TABLE link_usage
INFO:sqlalchemy.engine.Engine:[no key 0.00021s] ()
INFO:sqlalchemy.engine.Engine:
DROP TABLE "user"
INFO:sqlalchemy.engine.Engine:[no key 0.00037s] ()
INFO:sqlalchemy.engine.Engine:
DROP TABLE subscribe
INFO:sqlalchemy.engine.Engine:[no key 0.00022s] ()
INFO:sqlalchemy.engine.Engine:
DROP TABLE category
INFO:sqlalchemy.engine.Engine:[no key 0.00032s] ()
INFO:sqlalchemy.engine.Engine:
DROP TABLE menu_text
INFO:sqlalchemy.engine.Engine:[no key 0.00024s] ()
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.03959s ago] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.04091s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.04211s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.04305s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.0439s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:
CREATE TABLE menu_text (
	id SERIAL NOT NULL, 
	name VARCHAR(15) NOT NULL, 
	description TEXT, 
	created TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	updated TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (name)
)


INFO:sqlalchemy.engine.Engine:[no key 0.00073s] ()
INFO:sqlalchemy.engine.Engine:
CREATE TABLE category (
	id SERIAL NOT NULL, 
	name VARCHAR(150) NOT NULL, 
	created TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	updated TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	PRIMARY KEY (id)
)


INFO:sqlalchemy.engine.Engine:[no key 0.00084s] ()
INFO:sqlalchemy.engine.Engine:
CREATE TABLE subscribe (
	id SERIAL NOT NULL, 
	name VARCHAR(50) NOT NULL, 
	description INTEGER NOT NULL, 
	price NUMERIC(5, 2) NOT NULL, 
	category_id INTEGER NOT NULL, 
	created TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	updated TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(category_id) REFERENCES category (id) ON DELETE CASCADE
)


INFO:sqlalchemy.engine.Engine:[no key 0.00163s] ()
INFO:sqlalchemy.engine.Engine:
CREATE TABLE "user" (
	id SERIAL NOT NULL, 
	created_at TIMESTAMP WITHOUT TIME ZONE, 
	username VARCHAR(50) NOT NULL, 
	current_subscription_id INTEGER, 
	subscription_end_date TIMESTAMP WITHOUT TIME ZONE, 
	link_sent TIMESTAMP WITHOUT TIME ZONE, 
	links_sent INTEGER NOT NULL, 
	daily_link_limit INTEGER NOT NULL, 
	created TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	updated TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (username), 
	FOREIGN KEY(current_subscription_id) REFERENCES subscribe (id)
)


INFO:sqlalchemy.engine.Engine:[no key 0.00201s] ()
INFO:sqlalchemy.engine.Engine:
CREATE TABLE link_usage (
	id SERIAL NOT NULL, 
	user_id INTEGER NOT NULL, 
	links_sent INTEGER NOT NULL, 
	created TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	updated TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES "user" (id) ON DELETE CASCADE
)


INFO:sqlalchemy.engine.Engine:[no key 0.00090s] ()
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00046s] ()
INFO:sqlalchemy.engine.Engine:INSERT INTO category (name, created, updated) VALUES ($1::VARCHAR, now(), now()) RETURNING category.id, category.created, category.updated
INFO:sqlalchemy.engine.Engine:[generated in 0.00047s] ('Подписки',)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00055s] ()
INFO:sqlalchemy.engine.Engine:INSERT INTO menu_text (name, description, created, updated) SELECT p0::VARCHAR, p1::VARCHAR, p2::TIMESTAMP WITHOUT TIME ZONE, p3::TIMESTAMP WITHOUT TIME ZONE FROM (VALUES ($1::VARCHAR, $2::VARCHAR, now(), now(), 0), ($3::VARCHAR, $4::VARCHAR, now(), now(), 1), ($5::VARCHAR, $6::VARCHAR, now(), now(), 2), ($7::VARCHAR, $8::VARCHAR, now(), now(), 3)) AS imp_sen(p0, p1, p2, p3, sen_counter) ORDER BY sen_counter RETURNING menu_text.id, menu_text.created, menu_text.updated, menu_text.id AS id__1
INFO:sqlalchemy.engine.Engine:[generated in 0.00007s (insertmanyvalues) 1/1 (ordered)] ('main', 'Добро пожаловать!', 'payment', '<b>Варианты оплаты:</b>\n\u2705 Картой в боте', 'catalog', 'Категории:', 'active', 'Актив')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:aiogram.dispatcher:Polling stopped
INFO:aiogram.dispatcher:Polling stopped for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00074s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.006764s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008569s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01001s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01191s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:
DROP TABLE link_usage
INFO:sqlalchemy.engine.Engine:[no key 0.00036s] ()
INFO:sqlalchemy.engine.Engine:
DROP TABLE "user"
INFO:sqlalchemy.engine.Engine:[no key 0.00033s] ()
INFO:sqlalchemy.engine.Engine:
DROP TABLE subscribe
INFO:sqlalchemy.engine.Engine:[no key 0.00025s] ()
INFO:sqlalchemy.engine.Engine:
DROP TABLE category
INFO:sqlalchemy.engine.Engine:[no key 0.00027s] ()
INFO:sqlalchemy.engine.Engine:
DROP TABLE menu_text
INFO:sqlalchemy.engine.Engine:[no key 0.00048s] ()
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.03443s ago] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.03603s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.03696s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.03882s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.0402s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:
CREATE TABLE menu_text (
	id SERIAL NOT NULL, 
	name VARCHAR(15) NOT NULL, 
	description TEXT, 
	created TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	updated TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (name)
)


INFO:sqlalchemy.engine.Engine:[no key 0.00093s] ()
INFO:sqlalchemy.engine.Engine:
CREATE TABLE category (
	id SERIAL NOT NULL, 
	name VARCHAR(150) NOT NULL, 
	created TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	updated TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	PRIMARY KEY (id)
)


INFO:sqlalchemy.engine.Engine:[no key 0.00133s] ()
INFO:sqlalchemy.engine.Engine:
CREATE TABLE subscribe (
	id SERIAL NOT NULL, 
	name VARCHAR(50) NOT NULL, 
	description INTEGER NOT NULL, 
	price NUMERIC(5, 2) NOT NULL, 
	category_id INTEGER NOT NULL, 
	created TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	updated TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(category_id) REFERENCES category (id) ON DELETE CASCADE
)


INFO:sqlalchemy.engine.Engine:[no key 0.00143s] ()
INFO:sqlalchemy.engine.Engine:
CREATE TABLE "user" (
	id SERIAL NOT NULL, 
	created_at TIMESTAMP WITHOUT TIME ZONE, 
	username VARCHAR(50) NOT NULL, 
	current_subscription_id INTEGER, 
	subscription_end_date TIMESTAMP WITHOUT TIME ZONE, 
	link_sent TIMESTAMP WITHOUT TIME ZONE, 
	links_sent INTEGER NOT NULL, 
	daily_link_limit INTEGER NOT NULL, 
	created TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	updated TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (username), 
	FOREIGN KEY(current_subscription_id) REFERENCES subscribe (id)
)


INFO:sqlalchemy.engine.Engine:[no key 0.00172s] ()
INFO:sqlalchemy.engine.Engine:
CREATE TABLE link_usage (
	id SERIAL NOT NULL, 
	user_id INTEGER NOT NULL, 
	links_sent INTEGER NOT NULL, 
	created TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	updated TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES "user" (id) ON DELETE CASCADE
)


INFO:sqlalchemy.engine.Engine:[no key 0.00097s] ()
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00051s] ()
INFO:sqlalchemy.engine.Engine:INSERT INTO category (name, created, updated) VALUES ($1::VARCHAR, now(), now()) RETURNING category.id, category.created, category.updated
INFO:sqlalchemy.engine.Engine:[generated in 0.00135s] ('Подписки',)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00070s] ()
INFO:sqlalchemy.engine.Engine:INSERT INTO menu_text (name, description, created, updated) SELECT p0::VARCHAR, p1::VARCHAR, p2::TIMESTAMP WITHOUT TIME ZONE, p3::TIMESTAMP WITHOUT TIME ZONE FROM (VALUES ($1::VARCHAR, $2::VARCHAR, now(), now(), 0), ($3::VARCHAR, $4::VARCHAR, now(), now(), 1), ($5::VARCHAR, $6::VARCHAR, now(), now(), 2), ($7::VARCHAR, $8::VARCHAR, now(), now(), 3)) AS imp_sen(p0, p1, p2, p3, sen_counter) ORDER BY sen_counter RETURNING menu_text.id, menu_text.created, menu_text.updated, menu_text.id AS id__1
INFO:sqlalchemy.engine.Engine:[generated in 0.00008s (insertmanyvalues) 1/1 (ordered)] ('main', 'Добро пожаловать!', 'payment', '<b>Варианты оплаты:</b>\n\u2705 Картой в боте', 'catalog', 'Категории:', 'active', 'Актив')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:aiogram.event:Update id=657782903 is handled. Duration 0 ms by bot id=7128547705
INFO:aiogram.event:Update id=657782904 is handled. Duration 375 ms by bot id=7128547705
INFO:aiogram.event:Update id=657782905 is handled. Duration 172 ms by bot id=7128547705
INFO:aiogram.event:Update id=657782906 is handled. Duration 92 ms by bot id=7128547705
INFO:aiogram.event:Update id=657782907 is handled. Duration 77 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 31.07s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782908 is handled. Duration 93 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 33.02s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782909 is handled. Duration 172 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:INSERT INTO subscribe (name, description, price, category_id, created, updated) VALUES ($1::VARCHAR, $2::INTEGER, $3::NUMERIC(5, 2), $4::INTEGER, now(), now()) RETURNING subscribe.id, subscribe.created, subscribe.updated
INFO:sqlalchemy.engine.Engine:[generated in 0.00048s] ('Тест', 3, 99.0, 1)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782910 is handled. Duration 108 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00064s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782911 is handled. Duration 92 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.842s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 47.1s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782912 is handled. Duration 202 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00092s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782913 is handled. Duration 187 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00063s] (1,)
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000156D0380CD0>
ERROR:asyncio:Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x00000156CFD57620>, 563490.453)]']
connector: <aiohttp.connector.TCPConnector object at 0x00000156D02D8550>
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00119s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.005804s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:INSERT INTO "user" (id, created_at, username, current_subscription_id, subscription_end_date, link_sent, links_sent, daily_link_limit, created, updated) VALUES ($1::INTEGER, now(), $2::VARCHAR, $3::INTEGER, $4::TIMESTAMP WITHOUT TIME ZONE, $5::TIMESTAMP WITHOUT TIME ZONE, $6::INTEGER, $7::INTEGER, now(), now()) RETURNING "user".created_at, "user".created, "user".updated
INFO:sqlalchemy.engine.Engine:[generated in 0.00066s] (334570076, 'mimimichaello', None, None, None, 0, 1)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.01449s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.01603s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:UPDATE "user" SET current_subscription_id=$1::INTEGER, updated=now() WHERE "user".id = $2::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00056s] (1, 334570076)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782914 is handled. Duration 312 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00068s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01716s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01874s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01998s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.02176s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:
DROP TABLE link_usage
INFO:sqlalchemy.engine.Engine:[no key 0.00031s] ()
INFO:sqlalchemy.engine.Engine:
DROP TABLE "user"
INFO:sqlalchemy.engine.Engine:[no key 0.00104s] ()
INFO:sqlalchemy.engine.Engine:
DROP TABLE subscribe
INFO:sqlalchemy.engine.Engine:[no key 0.00041s] ()
INFO:sqlalchemy.engine.Engine:
DROP TABLE category
INFO:sqlalchemy.engine.Engine:[no key 0.00044s] ()
INFO:sqlalchemy.engine.Engine:
DROP TABLE menu_text
INFO:sqlalchemy.engine.Engine:[no key 0.00031s] ()
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.06767s ago] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.06945s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.0714s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.07516s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.07685s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:
CREATE TABLE menu_text (
	id SERIAL NOT NULL, 
	name VARCHAR(15) NOT NULL, 
	description TEXT, 
	created TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	updated TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (name)
)


INFO:sqlalchemy.engine.Engine:[no key 0.00119s] ()
INFO:sqlalchemy.engine.Engine:
CREATE TABLE category (
	id SERIAL NOT NULL, 
	name VARCHAR(150) NOT NULL, 
	created TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	updated TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	PRIMARY KEY (id)
)


INFO:sqlalchemy.engine.Engine:[no key 0.00130s] ()
INFO:sqlalchemy.engine.Engine:
CREATE TABLE subscribe (
	id SERIAL NOT NULL, 
	name VARCHAR(50) NOT NULL, 
	description INTEGER NOT NULL, 
	price NUMERIC(5, 2) NOT NULL, 
	category_id INTEGER NOT NULL, 
	created TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	updated TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(category_id) REFERENCES category (id) ON DELETE CASCADE
)


INFO:sqlalchemy.engine.Engine:[no key 0.00143s] ()
INFO:sqlalchemy.engine.Engine:
CREATE TABLE "user" (
	id SERIAL NOT NULL, 
	created_at TIMESTAMP WITHOUT TIME ZONE, 
	username VARCHAR(50) NOT NULL, 
	current_subscription_id INTEGER, 
	subscription_end_date TIMESTAMP WITHOUT TIME ZONE, 
	link_sent TIMESTAMP WITHOUT TIME ZONE, 
	links_sent INTEGER NOT NULL, 
	daily_link_limit INTEGER NOT NULL, 
	created TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	updated TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (username), 
	FOREIGN KEY(current_subscription_id) REFERENCES subscribe (id)
)


INFO:sqlalchemy.engine.Engine:[no key 0.00121s] ()
INFO:sqlalchemy.engine.Engine:
CREATE TABLE link_usage (
	id SERIAL NOT NULL, 
	user_id INTEGER NOT NULL, 
	links_sent INTEGER NOT NULL, 
	created TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	updated TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES "user" (id) ON DELETE CASCADE
)


INFO:sqlalchemy.engine.Engine:[no key 0.00094s] ()
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00064s] ()
INFO:sqlalchemy.engine.Engine:INSERT INTO category (name, created, updated) VALUES ($1::VARCHAR, now(), now()) RETURNING category.id, category.created, category.updated
INFO:sqlalchemy.engine.Engine:[generated in 0.00083s] ('Подписки',)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00060s] ()
INFO:sqlalchemy.engine.Engine:INSERT INTO menu_text (name, description, created, updated) SELECT p0::VARCHAR, p1::VARCHAR, p2::TIMESTAMP WITHOUT TIME ZONE, p3::TIMESTAMP WITHOUT TIME ZONE FROM (VALUES ($1::VARCHAR, $2::VARCHAR, now(), now(), 0), ($3::VARCHAR, $4::VARCHAR, now(), now(), 1), ($5::VARCHAR, $6::VARCHAR, now(), now(), 2), ($7::VARCHAR, $8::VARCHAR, now(), now(), 3)) AS imp_sen(p0, p1, p2, p3, sen_counter) ORDER BY sen_counter RETURNING menu_text.id, menu_text.created, menu_text.updated, menu_text.id AS id__1
INFO:sqlalchemy.engine.Engine:[generated in 0.00011s (insertmanyvalues) 1/1 (ordered)] ('main', 'Добро пожаловать!', 'payment', '<b>Варианты оплаты:</b>\n\u2705 Картой в боте', 'catalog', 'Категории:', 'active', 'Актив')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:aiogram.event:Update id=657782915 is handled. Duration 0 ms by bot id=7128547705
INFO:aiogram.event:Update id=657782916 is handled. Duration 405 ms by bot id=7128547705
INFO:aiogram.event:Update id=657782917 is handled. Duration 218 ms by bot id=7128547705
INFO:aiogram.event:Update id=657782918 is handled. Duration 109 ms by bot id=7128547705
INFO:aiogram.event:Update id=657782919 is handled. Duration 125 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 32.1s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782920 is handled. Duration 157 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 64.91s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782921 is handled. Duration 358 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:INSERT INTO subscribe (name, description, price, category_id, created, updated) VALUES ($1::VARCHAR, $2::INTEGER, $3::NUMERIC(5, 2), $4::INTEGER, now(), now()) RETURNING subscribe.id, subscribe.created, subscribe.updated
INFO:sqlalchemy.engine.Engine:[generated in 0.00042s] ('Тест', 3, 99.0, 1)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782922 is handled. Duration 109 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00107s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782923 is handled. Duration 109 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 3.689s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 75.91s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782924 is handled. Duration 218 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00088s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782925 is handled. Duration 204 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00086s] (1,)
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000235E53CE590>
ERROR:asyncio:Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x00000235E527B230>, 763143.609)]']
connector: <aiohttp.connector.TCPConnector object at 0x00000235E5276150>
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00115s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.006034s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:INSERT INTO "user" (id, created_at, username, current_subscription_id, subscription_end_date, link_sent, links_sent, daily_link_limit, created, updated) VALUES ($1::INTEGER, now(), $2::VARCHAR, $3::INTEGER, $4::TIMESTAMP WITHOUT TIME ZONE, $5::TIMESTAMP WITHOUT TIME ZONE, $6::INTEGER, $7::INTEGER, now(), now()) RETURNING "user".created_at, "user".created, "user".updated
INFO:sqlalchemy.engine.Engine:[generated in 0.00140s] (334570076, 'mimimichaello', None, None, None, 0, 1)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.01666s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.01844s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:UPDATE "user" SET current_subscription_id=$1::INTEGER, updated=now() WHERE "user".id = $2::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00040s] (1, 334570076)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782926 is handled. Duration 280 ms by bot id=7128547705
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000235E53E0650>
ERROR:asyncio:Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x00000235E527B3F0>, 763282.5)]']
connector: <aiohttp.connector.TCPConnector object at 0x00000235E53CF790>
INFO:aiogram.event:Update id=657782927 is handled. Duration 219 ms by bot id=7128547705
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000235E53E3590>
ERROR:asyncio:Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x00000235E527B3F0>, 763286.75)]']
connector: <aiohttp.connector.TCPConnector object at 0x00000235E53E0050>
INFO:aiogram.event:Update id=657782928 is handled. Duration 282 ms by bot id=7128547705
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000235E53E0D90>
ERROR:asyncio:Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x00000235E527B3F0>, 763290.859)]']
connector: <aiohttp.connector.TCPConnector object at 0x00000235E53E1190>
INFO:aiogram.event:Update id=657782929 is handled. Duration 266 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 161.7s ago] (1,)
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000235E544FAD0>
ERROR:asyncio:Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x00000235E527A200>, 763305.328)]']
connector: <aiohttp.connector.TCPConnector object at 0x00000235E57E2550>
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 161.7s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 161.7s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782930 is handled. Duration 265 ms by bot id=7128547705
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000235E53CEE10>
ERROR:asyncio:Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x00000235E527A4A0>, 763329.203)]']
connector: <aiohttp.connector.TCPConnector object at 0x00000235E58AD750>
INFO:aiogram.event:Update id=657782931 is handled. Duration 250 ms by bot id=7128547705
INFO:aiogram.dispatcher:Polling stopped
INFO:aiogram.dispatcher:Polling stopped for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00101s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01839s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.0196s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.02059s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.0215s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00051s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00047s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00043s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782932 is handled. Duration 295 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.615s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 12.49s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782933 is handled. Duration 280 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00081s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782934 is handled. Duration 218 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00094s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00062s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.006438s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782935 is handled. Duration 32 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 68.08s ago] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 68.08s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 68.08s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782936 is handled. Duration 32 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 74.75s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 85.63s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782937 is handled. Duration 577 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 73.09s ago] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782938 is handled. Duration 203 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 72.85s ago] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 72.85s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 72.85s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782939 is handled. Duration 30 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00099s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.011s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01232s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01336s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01441s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00051s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00036s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00101s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782940 is handled. Duration 344 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.33s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 5.332s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782941 is handled. Duration 563 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00094s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782942 is handled. Duration 405 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00048s] (1,)
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000001F09E9F1390>
ERROR:asyncio:Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x000001F09E32EBA0>, 922362.421)]']
connector: <aiohttp.connector.TCPConnector object at 0x000001F09E9F1350>
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00093s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.005681s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782943 is handled. Duration 359 ms by bot id=7128547705
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000001F09E9F22D0>
ERROR:asyncio:Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x000001F09E2B3BD0>, 922415.921)]']
connector: <aiohttp.connector.TCPConnector object at 0x000001F09E9F0450>
INFO:aiogram.event:Update id=657782944 is handled. Duration 375 ms by bot id=7128547705
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000001F09E273ED0>
ERROR:asyncio:Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x000001F09E2B3BD0>, 922420.093)]']
connector: <aiohttp.connector.TCPConnector object at 0x000001F09EA68610>
INFO:aiogram.event:Update id=657782945 is handled. Duration 265 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00081s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.006372s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008724s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.00994s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01114s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00048s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00054s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00068s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782946 is handled. Duration 359 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.288s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 5.402s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782947 is handled. Duration 312 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00106s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782948 is handled. Duration 250 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00084s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00070s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.004663s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782949 is handled. Duration 30 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00066s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007259s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.0106s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01195s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01293s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00086s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00074s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00086s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782950 is handled. Duration 312 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.161s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 4.087s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782951 is handled. Duration 327 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00056s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782952 is handled. Duration 202 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00080s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00075s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.00539s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782953 is handled. Duration 30 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00079s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007973s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01133s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01246s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.0136s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00073s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00048s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00093s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.006132s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007332s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008315s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009431s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00060s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00058s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00108s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782954 is handled. Duration 327 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.61s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 9.297s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782955 is handled. Duration 515 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00102s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782956 is handled. Duration 280 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00077s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00095s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.005569s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782957 is handled. Duration 30 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00064s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.006328s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008377s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009645s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01072s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00042s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00050s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00089s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782958 is handled. Duration 297 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.19s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 3.959s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782959 is handled. Duration 312 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00089s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782960 is handled. Duration 282 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00111s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00106s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.00557s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782961 is handled. Duration 31 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00131s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007025s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008718s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01155s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01341s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00107s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00097s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00087s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782962 is handled. Duration 297 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.192s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 2.189s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782963 is handled. Duration 280 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00119s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782964 is handled. Duration 219 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00084s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00086s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.006677s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782965 is handled. Duration 32 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00098s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008413s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.0101s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01105s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01186s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00112s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00076s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00055s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782966 is handled. Duration 296 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.9854s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 5.381s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782967 is handled. Duration 282 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00096s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782968 is handled. Duration 202 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00059s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00086s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.00959s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782969 is handled. Duration 47 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00078s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007831s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009217s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01088s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01345s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00074s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00088s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00085s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782970 is handled. Duration 296 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.06s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 4.82s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782971 is handled. Duration 329 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00090s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782972 is handled. Duration 219 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00101s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00113s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.005988s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782973 is handled. Duration 30 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00062s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.006913s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.00829s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009227s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01075s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00051s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00135s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00089s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782974 is handled. Duration 297 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.058s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 4.586s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782975 is handled. Duration 265 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00082s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782976 is handled. Duration 202 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00063s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00091s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.006148s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782977 is handled. Duration 30 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00100s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007998s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009728s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01108s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01193s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00069s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00081s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00080s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782978 is handled. Duration 327 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.018s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 3.072s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782979 is handled. Duration 295 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00093s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782980 is handled. Duration 265 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00079s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00114s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.004997s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782981 is handled. Duration 30 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00064s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.005831s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007071s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008363s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009565s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00091s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00062s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00090s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782982 is handled. Duration 391 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.376s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 2.816s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782983 is handled. Duration 1375 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00077s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782984 is handled. Duration 1250 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00122s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00140s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.006166s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782985 is handled. Duration 15 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00071s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.006526s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.00924s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01068s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01165s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00040s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00049s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00098s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782986 is handled. Duration 359 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.582s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 9.999s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782987 is handled. Duration 469 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00104s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782988 is handled. Duration 704 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00110s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00087s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.005882s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782989 is handled. Duration 32 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00087s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008488s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009553s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01049s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01139s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00149s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00070s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00091s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782990 is handled. Duration 359 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.274s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 10.12s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782991 is handled. Duration 312 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00101s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782992 is handled. Duration 469 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00084s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00067s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.004399s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782993 is handled. Duration 30 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00224s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008057s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.00991s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01086s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01178s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00092s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00068s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00113s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782994 is handled. Duration 281 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.045s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 3.027s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782995 is handled. Duration 312 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00106s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782996 is handled. Duration 265 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00082s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00187s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.006966s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657782997 is handled. Duration 31 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00094s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008451s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.00966s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01218s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00054s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00078s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00089s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782998 is handled. Duration 327 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.288s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 2.125s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657782999 is handled. Duration 296 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00105s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783000 is handled. Duration 219 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00099s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00174s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.006741s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783001 is handled. Duration 30 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00050s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.005875s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007196s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009262s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.0107s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00049s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00103s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00094s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783002 is handled. Duration 297 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.134s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 1.399s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783003 is handled. Duration 280 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00097s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783004 is handled. Duration 250 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00066s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00076s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.0042s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783005 is handled. Duration 15 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00134s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009931s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01123s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01242s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01399s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00058s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00061s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00115s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783006 is handled. Duration 296 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.625s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 4.304s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783007 is handled. Duration 280 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00130s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783008 is handled. Duration 250 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00108s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00073s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.006104s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783009 is handled. Duration 30 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00080s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.006257s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009239s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01159s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01346s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00127s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00041s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00075s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783010 is handled. Duration 422 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.267s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 1.459s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783011 is handled. Duration 828 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00105s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783012 is handled. Duration 280 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00104s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00062s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.007089s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783013 is handled. Duration 30 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00084s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.006505s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007604s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008597s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009517s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00057s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00052s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00086s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783014 is handled. Duration 296 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.098s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 3.254s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783015 is handled. Duration 281 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00047s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783016 is handled. Duration 234 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00069s] (1,)
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000002514ACF1510>
ERROR:asyncio:Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x000002514A59ABA0>, 924171.359)]']
connector: <aiohttp.connector.TCPConnector object at 0x000002514A5AF3D0>
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00121s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.006017s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783017 is handled. Duration 359 ms by bot id=7128547705
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000002514ACF1390>
ERROR:asyncio:Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x000002514A523BD0>, 924221.25)]']
connector: <aiohttp.connector.TCPConnector object at 0x000002514AD5D510>
INFO:aiogram.event:Update id=657783018 is handled. Duration 280 ms by bot id=7128547705
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000002514AD3BE10>
ERROR:asyncio:Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x000002514A523BD0>, 924225.562)]']
connector: <aiohttp.connector.TCPConnector object at 0x000002514AAF0E10>
INFO:aiogram.event:Update id=657783019 is handled. Duration 344 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00064s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.00528s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.006967s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008246s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009993s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00033s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00064s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00093s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783020 is handled. Duration 327 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.117s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 6.355s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783021 is handled. Duration 454 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00091s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783022 is handled. Duration 437 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00095s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00103s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.004648s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783023 is handled. Duration 16 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00103s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009121s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01052s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01161s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01271s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00068s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00052s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00093s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783024 is handled. Duration 327 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.091s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 1.873s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783025 is handled. Duration 375 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00126s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783026 is handled. Duration 250 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00072s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00076s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.003875s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783027 is handled. Duration 31 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00095s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008647s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01315s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01788s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.02031s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00062s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00125s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00090s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783028 is handled. Duration 295 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.123s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 2.563s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783029 is handled. Duration 280 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00092s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783030 is handled. Duration 219 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00061s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00064s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.004349s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783031 is handled. Duration 15 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00062s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.005659s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007383s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008968s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01016s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00051s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00096s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00057s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783032 is handled. Duration 297 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.013s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 8.661s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783033 is handled. Duration 282 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00114s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783034 is handled. Duration 250 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00074s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00055s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.00526s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783035 is handled. Duration 30 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00053s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.005812s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007909s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009407s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01102s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00044s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00054s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00079s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783036 is handled. Duration 422 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.374s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 4.426s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783037 is handled. Duration 407 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00082s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783038 is handled. Duration 265 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00116s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00086s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.005355s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783039 is handled. Duration 31 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00082s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.005147s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.006104s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.006986s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007859s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00040s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00065s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00096s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783040 is handled. Duration 297 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.129s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 1.379s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783041 is handled. Duration 375 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00062s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783042 is handled. Duration 437 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00093s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00075s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.007751s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783043 is handled. Duration 30 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00087s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.006928s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007975s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008837s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009701s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00071s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00061s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00113s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783045 is handled. Duration 327 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.107s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 3.237s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783046 is handled. Duration 313 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00119s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783047 is handled. Duration 265 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00119s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00117s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.004821s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783048 is handled. Duration 32 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00051s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.006531s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01022s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01308s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01432s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00100s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00046s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00083s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783049 is handled. Duration 359 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.393s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 2.844s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783050 is handled. Duration 375 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00091s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783051 is handled. Duration 281 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00059s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00168s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.00741s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783052 is handled. Duration 15 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00052s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007387s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01009s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01154s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01278s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00118s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00071s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00087s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783053 is handled. Duration 342 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.229s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 6.941s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783054 is handled. Duration 296 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00094s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783055 is handled. Duration 219 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00054s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00081s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.004419s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783056 is handled. Duration 32 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00067s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.00703s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01059s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01259s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01396s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00064s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00042s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00089s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783057 is handled. Duration 312 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.179s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 2.848s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783058 is handled. Duration 452 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00069s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783059 is handled. Duration 437 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00057s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00083s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.004088s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783060 is handled. Duration 15 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00103s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008791s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.0105s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01149s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.0124s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00060s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00047s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00068s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783061 is handled. Duration 327 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.865s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 2.787s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783062 is handled. Duration 375 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00116s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783063 is handled. Duration 343 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00080s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00082s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.004451s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783064 is handled. Duration 32 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00059s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.006665s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007855s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01028s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00046s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00241s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00091s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783066 is handled. Duration 297 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.082s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 3.022s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783067 is handled. Duration 265 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00105s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783068 is handled. Duration 297 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00096s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00099s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.007926s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783069 is handled. Duration 30 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00073s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007116s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008248s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009232s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01026s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00108s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00059s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00053s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783070 is handled. Duration 312 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.306s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 4.036s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783071 is handled. Duration 266 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00097s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783072 is handled. Duration 204 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00082s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00058s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.003769s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783073 is handled. Duration 30 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00091s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.006087s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007598s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008611s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009497s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00041s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00103s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00074s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783074 is handled. Duration 281 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.2s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 3.47s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783075 is handled. Duration 265 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00101s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783076 is handled. Duration 202 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00055s] (1,)
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000002951221D6D0>
ERROR:asyncio:Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x0000029511B1AC10>, 924668.687)]']
connector: <aiohttp.connector.TCPConnector object at 0x000002951221D4D0>
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00132s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.005392s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783077 is handled. Duration 312 ms by bot id=7128547705
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x0000029511C68B10>
ERROR:asyncio:Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x0000029511B1AC80>, 924706.453)]']
connector: <aiohttp.connector.TCPConnector object at 0x0000029511C6A950>
INFO:aiogram.event:Update id=657783078 is handled. Duration 250 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00048s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.005021s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.005955s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007296s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008178s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00040s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00034s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00101s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783079 is handled. Duration 312 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.176s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 9.05s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783080 is handled. Duration 327 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00044s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783081 is handled. Duration 202 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00133s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00113s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.00674s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783082 is handled. Duration 31 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00061s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.005286s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.006348s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.007736s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008645s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00058s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00042s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00109s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783083 is handled. Duration 311 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.084s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 3.192s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783084 is handled. Duration 265 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00056s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783085 is handled. Duration 234 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00117s] (1,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00054s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.003659s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783086 is handled. Duration 61 ms by bot id=7128547705
DEBUG:asyncio:Using proactor: IocpProactor
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:select current_schema()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00166s] ('menu_text', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.008045s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.009297s ago] ('subscribe', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.0106s ago] ('user', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 0.01177s ago] ('link_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[generated in 0.00045s] ()
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text
INFO:sqlalchemy.engine.Engine:[generated in 0.00050s] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @LikeeUp_bot id=7128547705 - 'LikeeUp Bot'
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[generated in 0.00076s] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783087 is handled. Duration 281 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 1.026s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 1.832s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783088 is handled. Duration 282 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00111s] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783089 is handled. Duration 202 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00095s] (1,)
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000001E420B61990>
ERROR:asyncio:Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x000001E420452C80>, 924932.656)]']
connector: <aiohttp.connector.TCPConnector object at 0x000001E420B618D0>
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00070s] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 0.004573s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783090 is handled. Duration 327 ms by bot id=7128547705
INFO:aiogram.event:Update id=657783091 is handled. Duration 405 ms by bot id=7128547705
INFO:aiogram.event:Update id=657783092 is handled. Duration 156 ms by bot id=7128547705
INFO:aiogram.event:Update id=657783093 is handled. Duration 217 ms by bot id=7128547705
INFO:aiogram.event:Update id=657783094 is handled. Duration 109 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 239.1s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783095 is handled. Duration 155 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 241.2s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783096 is handled. Duration 281 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:INSERT INTO subscribe (name, description, price, category_id, created, updated) VALUES ($1::VARCHAR, $2::INTEGER, $3::NUMERIC(5, 2), $4::INTEGER, now(), now()) RETURNING subscribe.id, subscribe.created, subscribe.updated
INFO:sqlalchemy.engine.Engine:[generated in 0.00038s] ('тест 2', 14, 55.0, 1)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783097 is handled. Duration 141 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 247.9s ago] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783098 is handled. Duration 125 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 249.2s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 250s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783099 is handled. Duration 218 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 248.3s ago] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783100 is handled. Duration 219 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 250.2s ago] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783101 is handled. Duration 234 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 250.1s ago] (2,)
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000001E420B959D0>
ERROR:asyncio:Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x000001E420453AF0>, 925182.734)]']
connector: <aiohttp.connector.TCPConnector object at 0x000001E420B94BD0>
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 250.1s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 250.1s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:UPDATE "user" SET current_subscription_id=$1::INTEGER, updated=now() WHERE "user".id = $2::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00031s] (2, 334570076)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783102 is handled. Duration 297 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 254.8s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 255.6s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783103 is handled. Duration 219 ms by bot id=7128547705
INFO:aiogram.event:Update id=657783104 is handled. Duration 109 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 259.6s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783105 is handled. Duration 125 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 258.2s ago] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783106 is handled. Duration 515 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00049s] (2,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783107 is not handled. Duration 15 ms by bot id=7128547705
ERROR:aiogram.event:Cause exception while process update id=657783107 by bot id=7128547705
IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".
[SQL: DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.ForeignKeyViolationError: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\САША!\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\fsm\storage\memory.py", line 56, in lock
    yield
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\courses\telegram\simple_bot\middlewares\db.py", line 21, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\courses\telegram\simple_bot\handlers\admin_private.py", line 75, in delete_subscribe
    await orm_delete_subscribe(session, int(subscribe_id))
  File "D:\courses\telegram\simple_bot\database\orm_query.py", line 165, in orm_delete_subscribe
    await session.execute(query)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 461, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1946, in orm_execute_statement
    return super().orm_execute_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".
[SQL: DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 264.9s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783108 is handled. Duration 156 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 263.3s ago] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783109 is handled. Duration 1015 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 6.345s ago] (2,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783110 is not handled. Duration 0 ms by bot id=7128547705
ERROR:aiogram.event:Cause exception while process update id=657783110 by bot id=7128547705
IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".
[SQL: DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.ForeignKeyViolationError: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\САША!\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\fsm\storage\memory.py", line 56, in lock
    yield
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\courses\telegram\simple_bot\middlewares\db.py", line 21, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\courses\telegram\simple_bot\handlers\admin_private.py", line 75, in delete_subscribe
    await orm_delete_subscribe(session, int(subscribe_id))
  File "D:\courses\telegram\simple_bot\database\orm_query.py", line 165, in orm_delete_subscribe
    await session.execute(query)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 461, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1946, in orm_execute_statement
    return super().orm_execute_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".
[SQL: DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 9.831s ago] (1,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783111 is handled. Duration 281 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 10.25s ago] (1,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783112 is handled. Duration 359 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 276.2s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783113 is handled. Duration 204 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 274.6s ago] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783114 is handled. Duration 516 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 16.15s ago] (2,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783115 is not handled. Duration 16 ms by bot id=7128547705
ERROR:aiogram.event:Cause exception while process update id=657783115 by bot id=7128547705
IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".
[SQL: DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.ForeignKeyViolationError: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\САША!\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\fsm\storage\memory.py", line 56, in lock
    yield
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\courses\telegram\simple_bot\middlewares\db.py", line 21, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\courses\telegram\simple_bot\handlers\admin_private.py", line 75, in delete_subscribe
    await orm_delete_subscribe(session, int(subscribe_id))
  File "D:\courses\telegram\simple_bot\database\orm_query.py", line 165, in orm_delete_subscribe
    await session.execute(query)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 461, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1946, in orm_execute_statement
    return super().orm_execute_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 131, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "d:\courses\telegram\simple_bot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "subscribe" нарушает ограничение внешнего ключа "user_current_subscription_id_fkey" таблицы "user"
DETAIL:  На ключ (id)=(2) всё ещё есть ссылки в таблице "user".
[SQL: DELETE FROM subscribe WHERE subscribe.id = $1::INTEGER]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 286.6s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783116 is handled. Duration 125 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 285s ago] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783117 is handled. Duration 312 ms by bot id=7128547705
INFO:aiogram.event:Update id=657783118 is handled. Duration 108 ms by bot id=7128547705
INFO:aiogram.event:Update id=657783119 is handled. Duration 109 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 299.4s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783120 is handled. Duration 108 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 300.8s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783121 is handled. Duration 234 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:INSERT INTO subscribe (name, description, price, category_id, created, updated) VALUES ($1::VARCHAR, $2::INTEGER, $3::NUMERIC(5, 2), $4::INTEGER, now(), now()) RETURNING subscribe.id, subscribe.created, subscribe.updated
INFO:sqlalchemy.engine.Engine:[cached since 58.63s ago] ('тест', 5, 99.0, 1)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783122 is handled. Duration 141 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 308.2s ago] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783123 is handled. Duration 125 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 309.4s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 310.2s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783124 is handled. Duration 391 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 308.6s ago] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783125 is handled. Duration 484 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 311.4s ago] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783126 is handled. Duration 202 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 311.9s ago] (3,)
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000001E420E10BD0>
ERROR:asyncio:Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x000001E420DF5240>, 925244.531)]']
connector: <aiohttp.connector.TCPConnector object at 0x000001E420E110D0>
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 311.9s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 311.9s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:UPDATE "user" SET current_subscription_id=$1::INTEGER, updated=now() WHERE "user".id = $2::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 61.79s ago] (3, 334570076)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783127 is handled. Duration 312 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 339.4s ago] ('main',)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783128 is handled. Duration 282 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT menu_text.id, menu_text.name, menu_text.description, menu_text.created, menu_text.updated 
FROM menu_text 
WHERE menu_text.name = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:[cached since 341.5s ago] ('catalog',)
INFO:sqlalchemy.engine.Engine:SELECT category.id, category.name, category.created, category.updated 
FROM category
INFO:sqlalchemy.engine.Engine:[cached since 342.3s ago] ()
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783129 is handled. Duration 375 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 341.1s ago] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783130 is handled. Duration 202 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.category_id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 342.5s ago] (1,)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:aiogram.event:Update id=657783131 is handled. Duration 219 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 342.3s ago] (3,)
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000001E420E00450>
ERROR:asyncio:Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x000001E420453D20>, 925275.0)]']
connector: <aiohttp.connector.TCPConnector object at 0x000001E420E028D0>
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 342.3s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 342.3s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783132 is handled. Duration 390 ms by bot id=7128547705
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000001E41CF14110>
ERROR:asyncio:Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x000001E420DCBEE0>, 925300.14)]']
connector: <aiohttp.connector.TCPConnector object at 0x000001E420C01190>
INFO:aiogram.event:Update id=657783133 is handled. Duration 265 ms by bot id=7128547705
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 404.3s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT "user".id, "user".created_at, "user".username, "user".current_subscription_id, "user".subscription_end_date, "user".link_sent, "user".links_sent, "user".daily_link_limit, "user".created, "user".updated 
FROM "user" 
WHERE "user".id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 404.3s ago] (334570076,)
INFO:sqlalchemy.engine.Engine:SELECT subscribe.id, subscribe.name, subscribe.description, subscribe.price, subscribe.category_id, subscribe.created, subscribe.updated 
FROM subscribe 
WHERE subscribe.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:[cached since 404.6s ago] (3,)
INFO:sqlalchemy.engine.Engine:UPDATE "user" SET subscription_end_date=$1::TIMESTAMP WITHOUT TIME ZONE, daily_link_limit=$2::INTEGER, updated=now() WHERE "user".id = $3::INTEGER
INFO:sqlalchemy.engine.Engine:[generated in 0.00065s] (datetime.datetime(2024, 5, 25, 14, 43, 57, 186643), 5, 334570076)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:aiogram.event:Update id=657783134 is handled. Duration 312 ms by bot id=7128547705
